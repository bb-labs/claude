!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,s=r.length,o=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=s)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<s;u=r[++n])y(u)||!I(u)?o+=" "+u:o+=" "+a(u);return o},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var s,o={};function a(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),h(r,t,r.depth)}function u(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function h(t,n,r){if(t.customInspect&&n&&v(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return m(i)||(i=h(t,i,r)),i}var s=function(t,e){if(x(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(g(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(y(e))return t.stylize("null","null")}(t,n);if(s)return s;var o=Object.keys(n),a=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(n)),w(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(n);if(0===o.length){if(v(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(A(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return t.stylize(Date.prototype.toString.call(n),"date");if(w(n))return l(n)}var c,I="",T=!1,R=["{","}"];(f(n)&&(T=!0,R=["[","]"]),v(n))&&(I=" [Function"+(n.name?": "+n.name:"")+"]");return A(n)&&(I=" "+RegExp.prototype.toString.call(n)),b(n)&&(I=" "+Date.prototype.toUTCString.call(n)),w(n)&&(I=" "+l(n)),0!==o.length||T&&0!=n.length?r<0?A(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=T?function(t,e,n,r,i){for(var s=[],o=0,a=e.length;o<a;++o)S(e,String(o))?s.push(p(t,e,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(p(t,e,n,r,i,!0))}),s}(t,n,r,a,o):o.map(function(e){return p(t,n,r,a,e,T)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,I,R)):R[0]+I+R[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,i,s){var o,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),S(r,i)||(o="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=y(n)?h(t,u.value,null):h(t,u.value,n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),x(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function f(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return"number"==typeof t}function m(t){return"string"==typeof t}function x(t){return void 0===t}function A(t){return I(t)&&"[object RegExp]"===T(t)}function I(t){return"object"==typeof t&&null!==t}function b(t){return I(t)&&"[object Date]"===T(t)}function w(t){return I(t)&&("[object Error]"===T(t)||t instanceof Error)}function v(t){return"function"==typeof t}function T(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(x(s)&&(s=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(s)){var r=t.pid;o[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else o[n]=function(){};return o[n]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=d,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=x,e.isRegExp=A,e.isObject=I,e.isDate=b,e.isError=w,e.isFunction=v,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(2);var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var t=new Date,e=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),z[t.getMonth()],e].join(" ")}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",N(),e.format.apply(e,arguments))},e.inherits=n(3),e._extend=function(t,e){if(!e||!I(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function E(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(O&&t[O]){var e;if("function"!=typeof(e=t[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise(function(t,r){e=t,n=r}),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push(function(t,r){t?n(t):e(r)});try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),O&&Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=O,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};e.apply(this,n).then(function(e){t.nextTick(o,null,e)},function(e){t.nextTick(E,e,o)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(1))},function(t,e){var n,r,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,c=[],h=!1,l=-1;function p(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&f())}function f(){if(!h){var t=a(p);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||h||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"cross",function(){return E}),n.d(r,"inverse",function(){return B}),n.d(r,"matMult",function(){return F}),n.d(r,"cofactors",function(){return _});var i={};n.r(i),n.d(i,"min",function(){return U}),n.d(i,"sub",function(){return D}),n.d(i,"sin",function(){return V}),n.d(i,"div",function(){return Z}),n.d(i,"max",function(){return Y}),n.d(i,"sum",function(){return k}),n.d(i,"add",function(){return G}),n.d(i,"mult",function(){return H}),n.d(i,"mean",function(){return q}),n.d(i,"norm",function(){return J}),n.d(i,"assign",function(){return W});var s={};n.r(s),n.d(s,"randrange",function(){return X});var o=n(0);const a="shape",u="offset",c="contig",h="strides",l=/ +/g,p=/\d+/,f=["","i","j","k"],d=":",y=/\d*:\d*/,g="],\n$1[",m=/\]\,(\s*)\[/g,x=/(\+|-)*\s*\d+(\.\d*)?/g,A=Object.assign(Math,{add:function(t,e){return t+e},subtract:function(t,e){return t-e},divide:function(t,e){return t/e},multiply:function(t,e){return t*e}}),I=function(t){return t.constructor===Float32Array||t.constructor===Int8Array||t.constructor===Int16Array||t.constructor===Int32Array||t.constructor===Uint8Array||t.constructor===Uint16Array||t.constructor===Uint32Array||t.constructor===Uint8ClampedArray},b=function(t){return String(t).match(x).map(v).map(Number)},w=function({index:t,array:e}){let n="";for(let r=0;r<e.type.size;r++){let i=e.data[t+r];const s=Math.sign(i)<0?"-":"+";i=Math.abs(i),0!==r?n+=`${s}${i}${f[r]}`:n+=`${"-"===s?s:""}${i}`}return n},v=function(t){return t.replace(l,"")},T=function(t,e=[]){return t.constructor!==Array?e:T(t[0],e.concat(t.length))},R=function({index:t}){let e=-1;for(let n=0;n<t.length;n++){if(e>=0&&t[n].constructor===String&&n-e>1)return!1;t[n].constructor===String&&(e=n)}return!0},z=function({shape:t,type:e,lastStride:n}){const r=new Array(t.length);let i=n||e.size;r[r.length-1]=i;for(let e=t.length-1;e>0;e--)r[e-1]=i*=t[e];return r},N=function({shape:t,size:e}){const n=new Array(t.length),r=t.reduce(A.multiply,1);for(let i=0;i<t.length;i++)n[i]=t[i]<0?-e/r:t[i];return n};class S{constructor(t){this.type=t.type,this.shape=a in t?t.shape:[],this.offset=u in t?t.offset:0,this.contig=!(c in t)||t.contig,this.strides=h in t?t.strides:z({shape:this.shape,type:this.type}),this.id=`${this.type.size}|${this.shape}|${this.strides}|${this.offset}`,this.size=this.shape.reduce(A.multiply,1),this.lastStride=this.strides[this.strides.length-1]}copy(){return new S(JSON.parse(JSON.stringify(this)))}flatIndex(t){let e=this.offset;for(let n=0;n<t.length;n++)e+=t[n]*this.strides[n];return e}slice(t){const e=new Array,n=new Array,r=R({index:t});let i=this.offset;for(let r=0;r<this.shape.length;r++)if(t[r]===d||void 0===t[r])e.push(this.shape[r]),n.push(this.strides[r]);else if(y.test(t[r])){let[s,o]=t[r].split(d).map(Number);0===o&&(o=this.shape[r]),i+=this.strides[r]*s,e.push(o-s),n.push(this.strides[r])}else p.test(t[r])&&(i+=this.strides[r]*t[r]);return new S({shape:e,strides:n,offset:i,contig:r,type:this.type})}transpose(){return new S({type:this.type,shape:this.shape.slice().reverse(),strides:this.strides.slice().reverse(),offset:this.offset,contig:!1})}reshape(t){const e=N({shape:t,size:this.size}),n=z({shape:e,type:this.type,lastStride:this.lastStride});return new S({type:this.type,shape:e,strides:n})}}class O{static split(t=[],e=[]){return[t.slice(0,t.length/2),t.slice(t.length/2),e.slice(0,e.length/2),e.slice(e.length/2)]}static variable({symbol:t,size:e,index:n}){return new Array(e).fill(null).map(function(e,r){return`${t}[${n}+${r}]`})}static exp(t){if(1===t.length)return[`Math.exp(${t})`];const[e,n]=O.split(t);return[O.exp(e),O.exp(n)].flat(Number.POSITIVE_INFINITY)}static sin(t){if(1===t.length)return[`Math.sin(${t})`];const[e,n]=O.split(t);return[O.sin(e),O.sin(n)].flat(Number.POSITIVE_INFINITY)}static cos(t){if(1===t.length)return[`Math.cos(${t})`];const[e,n]=O.split(t);return[O.cos(e),O.cos(n)].flat(Number.POSITIVE_INFINITY)}static and(t,e){if(1===t.length)return[`(${t}&&${e})`];const[n,r,i,s]=O.split(t,e);return[O.and(n,i),O.and(r,s)].flat(Number.POSITIVE_INFINITY)}static min(t,e){if(1===t.length)return[`(${t}<${e})`];const[n,r,i,s]=O.split(t,e);return[O.min(n,i),O.min(r,s)].flat(Number.POSITIVE_INFINITY)}static max(t,e){if(1===t.length)return[`(${t}>${e})`];const[n,r,i,s]=O.split(t,e);return[O.max(n,i),O.max(r,s)].flat(Number.POSITIVE_INFINITY)}static add(t,e){if(1===t.length)return[`(${t}+${e})`];const[n,r,i,s]=O.split(t,e);return[O.add(n,i),O.add(r,s)].flat(Number.POSITIVE_INFINITY)}static subtract(t,e){if(1===t.length)return[`(${t}-${e})`];const[n,r,i,s]=O.split(t,e);return[O.subtract(n,i),O.subtract(r,s)].flat(Number.POSITIVE_INFINITY)}static multiply(t,e){if(1===t.length)return[`${t}*${e}`];const[n,r,i,s]=O.split(t,e);return[O.subtract(O.multiply(n,i),O.multiply(O.conjugate(s),r)),O.add(O.multiply(s,n),O.multiply(r,O.conjugate(i)))].flat(Number.POSITIVE_INFINITY)}static divide(t,e){return 1===t.length?[`(${t}/${e})`]:O.scale(O.multiply(t,O.conjugate(e)),`(1/${O.sum(O.square(e))})`)}static squareRoot(t){if(1===t.length)return[`Math.sqrt(${t})`];const[e,n]=O.split(t);return[O.squareRoot(e),O.squareRoot(n)].flat(Number.POSITIVE_INFINITY)}static norm(t){return 1===t.length?[`(${t})`]:O.squareRoot(O.sumSquares(t))}static sumSquares(t){return O.sum(O.square(t))}static sum(t){if(1===t.length)return[`(${t})`];const[e,n]=O.split(t);return O.add(O.sum(e),O.sum(n))}static scale(t,e){if(1===t.length)return[`(${t}*${e})`];const[n,r]=O.split(t);return[O.scale(n,e),O.scale(r,e)].flat(Number.POSITIVE_INFINITY)}static square(t){if(1===t.length)return[`(${t}*${t})`];const[e,n]=O.split(t);return[O.square(e),O.square(n)].flat(Number.POSITIVE_INFINITY)}static conjugate(t){if(1===t.length)return[`(${t})`];const[e,n]=O.split(t);return[O.conjugate(e),O.negate(n)].flat(Number.POSITIVE_INFINITY)}static negate(t){if(1===t.length)return[`-(${t})`];const[e,n]=O.split(t);return[O.negate(e),O.negate(n)].flat(Number.POSITIVE_INFINITY)}static assign(t,e,n="="){if(1===t.length)return[`${t}${n}${e}`];const[r,i,s,o]=O.split(t,e);return[O.assign(r,s,n),O.assign(i,o,n)].flat(Number.POSITIVE_INFINITY)}}var E={test:function(t,e,n,r){return this.pointwise(t,e,n,r)},pointwise:function(t,e,n,r){const i=[],s=[],o=[];for(let r=0;r<3;r++)i.push(O.variable({symbol:"A.data",index:t.header.flatIndex([r,0]),size:t.type.size})),s.push(O.variable({symbol:"B.data",index:e.header.flatIndex([r,0]),size:e.type.size})),o.push(O.variable({symbol:"R.data",index:n.header.flatIndex([r,0]),size:n.type.size}));return new Function("A, B, R",[...O.assign(o[0],O.add(O.negate(O.multiply(i[2],s[1])),O.multiply(s[2],i[1]))),...O.assign(o[1],O.add(O.negate(O.multiply(i[0],s[2])),O.multiply(s[0],i[2]))),...O.assign(o[2],O.subtract(O.multiply(i[0],s[1]),O.multiply(s[0],i[1]))),"return R"].join("\n"))}},_=function(){};const L=function(t,e){if(1===t.length)return O.variable({symbol:"A.data",size:e.type.size,index:e.header.flatIndex(t[0])});const n=[],r=Math.sqrt(t.length);for(let i=0;i<r;i++){const r=Math.pow(-1,i%2),s=L(M(t,0,i),e),o=O.variable({symbol:"A.data",size:e.type.size,index:e.header.flatIndex(t[i])}),a=O.multiply(o,s);n.push(r>0?a:O.negate(a))}return n.reduce(O.add)},M=function(t,e,n){const r=Math.sqrt(t.length);return t.filter(function(t,i){return i%r!==n&&Math.floor(i/r)!==e})};var B={test:function(t,e,n,r){return this.pointwise(t,e,n,r)},pointwise:function(t,e,n,r){const i=Math.sqrt(t.size),s=function(t){const e=[];for(let n=0;n<t;n++)for(let r=0;r<t;r++)e.push([n,r]);return e}(i),o=O.variable({symbol:"temp",size:t.type.size,index:0}),a=O.variable({symbol:"determinant",size:t.type.size,index:0}),u=new Array(i*i).fill(null).map(function(e,r){const o=r%i,a=Math.floor(r/i),u=Math.pow(-1,(a+o)%2),c=L(M(s,o,a),t),h=O.variable({index:n.header.flatIndex([a,o]),symbol:"R.data",size:n.type.size});return O.assign(h,u<0?O.negate(c):c)}).flat(Number.POSITIVE_INFINITY),c=O.assign(a,new Array(i).fill(null).map(function(e,r){const i=O.variable({symbol:"A.data",size:t.type.size,index:t.header.flatIndex([0,r])}),s=O.variable({symbol:"R.data",size:t.type.size,index:n.header.flatIndex([r,0])});return O.multiply(i,s)}).reduce(O.add)),h=new Array(i*i).fill(null).map(function(t,e){const r=e%i,s=Math.floor(e/i),u=O.variable({index:n.header.flatIndex([s,r]),symbol:"R.data",size:n.type.size});return[O.assign(o,O.divide(u,a)),O.assign(u,o)]}).flat(Number.POSITIVE_INFINITY);return new Function("A, B, R",[`const temp = new Array(${t.type.size})`,`const determinant = new Array(${t.type.size})`,...u,...c,...h,"return R"].join("\n"))}},F={test:function(t,e,n,r){return n.size>1e3?this.symbolic(t,e,n,r):this.pointwise(t,e,n,r)},symbolic:function(t,e,n,r){const i=O.variable({symbol:"A.data",size:t.type.size,index:"AIndex"}),s=O.variable({symbol:"B.data",size:e.type.size,index:"BIndex"}),o=O.variable({symbol:"R.data",size:n.type.size,index:"RIndex"});return new Function("A, B, R, meta",["for (let r = 0; r < A.shape[0]; r++){","for (let c = 0; c < B.shape[1]; c++){","const RIndex = r * R.strides[0] + c * R.strides[1] + R.offset","R.data[RIndex] = 0","for (let s = 0; s < A.shape[1]; s++) {","const AIndex = r * A.strides[0] + s * A.strides[1] + A.offset","const BIndex = r * B.strides[0] + s * B.strides[1] + B.offset",`${O.assign(o,O.multiply(i,s),"+=")}`,"}}}","return R"].join("\n"))},pointwise:function(t,e,n,r){const i=[],s=t.shape[0],o=e.shape[1],a=t.shape[1];for(let r=0;r<s;r++)for(let s=0;s<o;s++){const o=O.variable({symbol:"R.data",size:n.type.size,index:n.header.flatIndex([r,s])}),u=new Array(a).fill(null).map(function(n,i){const o=O.variable({symbol:"A.data",size:t.type.size,index:t.header.flatIndex([r,i])}),a=O.variable({symbol:"B.data",size:e.type.size,index:e.header.flatIndex([i,s])});return O.multiply(o,a)}).reduce(O.add);i.push(O.assign(o,u))}return new Function("A, B, R",[i.flat(Number.POSITIVE_INFINITY).join("\n"),"return R"].join("\n"))}};const P=function(t,e,n,r){const i=r.axes,s=[...new Array(Math.max(t.shape.length,e.shape.length,n.shape.length)).keys()],o=s.filter(function(t){return!r.axes.includes(t)}),a=s.slice().reverse().filter(C,t).reverse(),u=s.slice().reverse().filter(C,e).reverse(),c=o.slice().reverse().filter(C,n).reverse(),h=i.reduce(function(e,n){return e*t.shape[n]},1),l=o.reduce(function(e,n){return e*t.shape[n]},1),p=s.reduce(function(e,n){return e*t.shape[n]},1),f=i.map(j,t),d=o.map(j,t),y=s.map(j,n),g=$("A",a,!0),m=$("B",u,e.shape.length===n.shape.length),x=$("R",c,n.shape.length===t.shape.length),A=O.variable({symbol:"temp",index:"0",size:n.type.size});return{sA:O.variable({symbol:"A.data",index:"AIndex",size:t.type.size}),sB:O.variable({symbol:"B.data",index:"BIndex",size:e.type.size}),sR:O.variable({symbol:"R.data",index:"RIndex",size:n.type.size}),sT:A,AIndex:g,BIndex:m,RIndex:x,innerSize:h,outerSize:l,totalSize:p,innerLoops:f,outerLoops:d,totalLoops:y,ANonZeroAxes:a,BNonZeroAxes:u,RNonZeroAxes:c,innerLoopAxes:i,totalLoopAxes:s,outerLoopAxes:o}},j=function(t){return`for(let i${t}=0; i${t} < ${this.shape[t]}; i${t}++){`},$=function(t,e,n){return e.reduce(function(e,r,i){return`${e} + ${t}.strides[${n?r:i}] * i${r}`},`const ${t}Index = ${t}.offset`)},C=function(t,e){const n=this.shape.length-e-1;return!(n<0)&&this.shape[n]>1};var U={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[`const temp = new Array(${t.type.size})`,...y,h,"temp.fill(Number.POSITIVE_INFINITY)",...d,u,`if(${O.min(i,a).map(function(t){return new Array(t)}).reduce(O.and)}){\n                ${O.assign(a,i).join("\n")}\n            }`,"}".repeat(I.length),...O.assign(o,a),"}".repeat(w.length),"return R"].join("\n"))}},D={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[...g,u,c,h,...O.assign(o,O.subtract(i,s)),"}".repeat(b.length),"return R"].join("\n"))}},V={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[...y,h,...d,u,...O.assign(o,O.sin(i)),"}".repeat(I.length),"}".repeat(w.length),"return R"].join("\n"))}},Z={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[...g,u,c,h,...O.assign(o,O.divide(i,s)),"}".repeat(b.length),"return R"].join("\n"))}},Y={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[`const temp = new Array(${t.type.size})`,...y,h,"temp.fill(Number.NEGATIVE_INFINITY)",...d,u,`if(${O.max(i,a).map(function(t){return new Array(t)}).reduce(O.and)}){\n                ${O.assign(a,i).join("\n")}\n            }`,"}".repeat(I.length),...O.assign(o,a),"}".repeat(w.length),"return R"].join("\n"))}},k={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[`const temp = new Array(${t.type.size})`,...y,h,"temp.fill(0)",...d,u,...O.assign(a,i,"+="),"}".repeat(I.length),...O.assign(o,a),"}".repeat(w.length),"return R"].join("\n"))}},G={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[...g,u,c,h,...O.assign(o,O.add(i,s)),"}".repeat(b.length),"return R"].join("\n"))}},H={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[...g,u,c,h,...O.assign(o,O.multiply(i,s)),"}".repeat(b.length),"return R"].join("\n"))}},q={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[`const temp = new Array(${t.type.size})`,...y,h,"temp.fill(0)",...d,u,...O.assign(a,i,"+="),"}".repeat(I.length),...O.assign(o,a.map(function(t){return`${t} / ${l}`})),"}".repeat(w.length),"return R"].join("\n"))}},J={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",["let temp",...y,h,"temp = 0",...d,u,...O.assign(["temp"],O.sumSquares(i),"+="),"}".repeat(I.length),...O.assign(o,O.squareRoot(["temp"])),"}".repeat(w.length),"return R"].join("\n"))}},W={test:function(t,e,n,r){return this.symbolic(t,e,n,r)},symbolic:function(t,e,n,r){const{sA:i,sB:s,sR:o,sT:a,AIndex:u,BIndex:c,RIndex:h,innerSize:l,outerSize:p,totalSize:f,innerLoops:d,outerLoops:y,totalLoops:g,ANonZeroAxes:m,BNonZeroAxes:x,RNonZeroAxes:A,innerLoopAxes:I,totalLoopAxes:b,outerLoopAxes:w}=P(t,e,n,r);return new Function("A, B, R",[...g,u,h,...O.assign(o,i),"}".repeat(b.length),"return R"].join("\n"))}},X={true:function({low:t,high:e}){return t+Math.random()*(e-t)}},K=new class{constructor(t){this.suite={},this.methods=t}invoke(t,e,n,r,i){let s;try{(s=this.suite[t.id][e.id][n.id][i]).name}catch{this.suite[t.id]={},this.suite[t.id][e.id]={},this.suite[t.id][e.id][n.id]={},this.suite[t.id][e.id][n.id][i]=this.methods[i].test(t,e,n,r),s=this.suite[t.id][e.id][n.id][i]}return s(t,e,n,r)}}({...r,...i,...s});class Q{constructor({header:t,init:e=function(){return new this.type.array(this.size*this.type.size)}}){for(const e in t)this[e]=t[e];this.header=t,this.data=e.call(this)}static tensor(t,e){return new Q({header:new S({type:e,shape:T(t)}),init:function(){if(I(t))return t;const e=new this.type.array(this.size*this.type.size);return e.set([t].flat(Number.POSITIVE_INFINITY).map(b).flat()),e}})}static zerosLike(t){return new Q({header:new S({shape:t.shape,type:t.type})})}static zeros(t,e){return new Q({header:new S({shape:t,type:e})})}static onesLike(t){return new Q({header:new S({shape:t.shape,type:t.type}),init:function(){return new this.type.array(this.size*this.type.size).fill(1)}})}static ones(t,e){return new Q({header:new S({shape:t,type:e}),init:function(){return new this.type.array(this.size*this.type.size).fill(1)}})}static arange(t,e,n,r){return new Q({header:new S({type:r,shape:[A.round((n-t)/e)]}),init:function(){const r=new this.type.array(this.size*this.type.size);for(let i=t,s=0;i<n;i+=e,s++)r[s]=i;return r}})}static linspace(t,e,n,r){const i=(e-t)/n;return new Q({header:new S({type:r,shape:[n]}),init:function(){const n=new this.type.array(this.size*this.type.size);for(let r=t,s=0;r<e;r+=i,s++)n[s]=r;return n}})}static rand(t,e){return new Q({header:new S({shape:t,type:e}),init:function(){const t=new this.type.array(this.size*this.type.size);for(let e=0;e<t.length;e++)t[e]=A.random()-1;return t}})}static randrange(t,e,n,r){return new Q({header:new S({shape:n,type:r}),init:function(){const n=new this.type.array(this.size*this.type.size);for(let r=0;r<n.length;r++)n[r]=K.invoke({low:t,high:e,method:Q.randrange.name});return n}})}static eye(t,e){return new Q({header:new S({shape:t,type:e}),init:function(){const t=new this.type.array(this.size),e=this.strides.reduce(A.add),n=A.min(...this.shape);for(let r=0;r<n*e;r+=e)t[r]=1;return t}})}astype(t,e=this){let n=e.shape.slice();return t.size>1&&1===e.type.size&&(n[n.length-1]/=t.size),new Q({header:new S({type:t,shape:n,offset:this.offset,contig:this.contig}),init:function(){return new this.type.array(e.data)}})}copy(t=this){return new Q({header:this.header,init:function(){return t.data.slice()}})}ravel(){return Q.tensor(this.toRaw(),this.type).reshape([-1])}slice(t,e=this){return new Q({header:this.header.slice(t),init:function(){return e.data}})}T(t=this){return new Q({header:this.header.transpose(),init:function(){return t.data}})}reshape(t,e=this){return this.contig?new Q({header:this.header.reshape(t),init:function(){return e.data}}):Q.array(this.toRaw(),this.type).reshape({shape:t})}toRaw(t=this.offset,e=0){return this.shape.length&&e!==this.shape.length?[...new Array(this.shape[e]).keys()].map(function(n){return this.toRaw(n*this.strides[e]+t,e+1)},this):w({index:t,array:this})}valueOf(){return this.data[this.offset]}toString(){return JSON.stringify(this.toRaw()).replace(m,g)}[o.inspect.custom](){return this.toString()}}for(const[t,e]of[[1,""],[2,"Complex"],[4,"Quat"]])Q[e+"Uint8Clamped"]={size:t,array:Uint8ClampedArray},Q[e+"Uint8"]={size:t,array:Uint8Array},Q[e+"Uint16"]={size:t,array:Uint16Array},Q[e+"Uint32"]={size:t,array:Uint32Array},Q[e+"Int8"]={size:t,array:Int8Array},Q[e+"Int16"]={size:t,array:Int16Array},Q[e+"Int32"]={size:t,array:Int32Array},Q[e+"Float32"]={size:t,array:Float32Array};for(const t in K.methods)Q[t]=function(e,n,r,i={axes:[]}){return K.invoke(e,n,r,i,t)};Q.NULL=Q.zeros([],Q.Int32);class tt{constructor(t){this.context=t.context,this.mapType=this.mapType.bind(this),this.createBuffer=this.createBuffer.bind(this)}createBuffer({array:t}){const e=this.context.createBuffer(),n=this.mapType({array:t}),r=this.context.STATIC_DRAW,i=this.context.ARRAY_BUFFER;return this.context.bindBuffer(i,e),this.context.bufferData(i,t.data,r),{buffer:e,size:t.shape[1],count:t.shape[0],type:n,normalize:!1,offset:t.offset*t.type.BYTES_PER_ELEMENT,stride:t.strides[0]*t.type.BYTES_PER_ELEMENT}}mapType({array:t}){return t.type===Int8Array?this.context.BYTE:t.type===Uint8Array?this.context.UNSIGNED_BYTE:t.type===Uint8ClampedArray?this.context.UNSIGNED_BYTE:t.type===Int16Array?this.context.SHORT:t.type===Uint16Array?this.context.UNSIGNED_SHORT:t.type===Int32Array?this.context.INT:t.type===Uint32Array?this.context.UNSIGNED_INT:t.type===Float32Array?this.context.FLOAT:null}}var et={CONTEXT_WEB_GL:"webgl",HUD_FONT:"18px serif",HUD_COLOR:"rgba(255, 255, 255, 1)",HUD_TEXT_LOCATION:[10,50],CANVAS_STROKE_COLOR:"white",CANVAS_FILL_COLOR:"rgba(255, 165, 0, 1)",BINDINGS:{o:{name:"zoom",args:[!0]},i:{name:"zoom",args:[!1]},ArrowUp:{name:"pan",args:[0]},ArrowDown:{name:"pan",args:[1]},ArrowLeft:{name:"pan",args:[2]},ArrowRight:{name:"pan",args:[3]}},VERTEX_SOURCE:"attribute float a_PointSize;\nattribute vec4 a_Position;\nattribute vec4 a_Color;\nuniform mat4 u_ViewMatrix;\nuniform mat4 u_ProjMatrix;\nvarying vec4 v_Color;\nvoid main() {\n  gl_PointSize = a_PointSize;\n  gl_Position = u_ProjMatrix * u_ViewMatrix * a_Position;\n  v_Color = a_Color;\n}\n",FRAGMENT_SOURCE:"precision mediump float;\nvarying vec4 v_Color;\nvoid main() {\n  gl_FragColor = v_Color;\n}\n",TO_VECTOR:Q.tensor([[0],[0],[0],[1]],Q.Float32),UP_VECTOR:Q.tensor([[0],[1],[0],[1]],Q.Float32),FROM_VECTOR:Q.tensor([[0],[0],[20],[1]],Q.Float32),VIEWING_ANGLE:30,ASPECT_RATIO:1,NEAR:.1,FAR:100,ZOOM_DELTA:.05,PAN_DELTA:Math.PI/64,ACTIVE_VERTICES:0,UP_DIRECTION:0,DOWN_DIRECTION:1,LEFT_DIRECTION:2,RIGHT_DIRECTION:3};class nt{constructor(){this.config=et,this.UP=this.config.UP_VECTOR,this.TO=this.config.TO_VECTOR,this.FROM=this.config.FROM_VECTOR;const t=Math.sin(this.config.PAN_DELTA),e=Math.cos(this.config.PAN_DELTA);this.upRot=Q.tensor([[1,0,0,0],[0,e,-t,0],[0,t,e,0],[0,0,0,1]],Q.Float32),this.downRot=Q.tensor([[1,0,0,0],[0,e,t,0],[0,-t,e,0],[0,0,0,1]],Q.Float32),this.leftRot=Q.tensor([[e,0,t,0],[0,1,0,0],[-t,0,e,0],[0,0,0,1]],Q.Float32),this.rightRot=Q.tensor([[e,0,-t,0],[0,1,0,0],[t,0,e,0],[0,0,0,1]],Q.Float32)}lookAt(){const t=Q.eye({shape:[4,4]}),e=Q.eye({shape:[4,4]}),n=this.FROM.subtract({with:this.TO}),r=this.UP.cross({with:n}),i=n.divide({with:n.norm()}),s=r.divide({with:r.norm()}),o=i.cross({with:s});return t.assign({region:[":3",0],with:s}).assign({region:[":3",1],with:o}).assign({region:[":3",2],with:i}),e.assign({region:[3,":3"],with:this.FROM.multiply({with:-1})}),e.matMult({with:t})}project(){const t=Math.PI*this.config.VIEWING_ANGLE/180/2,e=1/(this.config.FAR-this.config.NEAR),n=Math.sin(t),r=Math.cos(t)/n,i=new Float32Array(16);return i[0]=r/this.config.ASPECT_RATIO,i[5]=r,i[10]=-(this.config.FAR+this.config.NEAR)*e,i[11]=-1,i[14]=-2*this.config.NEAR*this.config.FAR*e,Q.tensor(i,Q.Float32).reshape([4,4])}rotate({orientation:t,viewMatrix:e,viewMatrixInv:n}){n.T().matMult({with:t}).matMult({with:e.T()}).matMult({with:this.TO,result:this.TO})}pan(t){const e=this.lookAt(),n=e.inverse();switch(t){case this.config.UP_DIRECTION:return this.rotate({orientation:this.upRot,viewMatrix:e,viewMatrixInv:n});case this.config.DOWN_DIRECTION:return this.rotate({orientation:this.downRot,viewMatrix:e,viewMatrixInv:n});case this.config.LEFT_DIRECTION:return this.rotate({orientation:this.leftRot,viewMatrix:e,viewMatrixInv:n});case this.config.RIGHT_DIRECTION:return this.rotate({orientation:this.rightRot,viewMatrix:e,viewMatrixInv:n})}}zoom(t){const e=t?"add":"subtract",n=this.FROM.subtract({with:this.TO}).multiply({with:this.config.ZOOM_DELTA});this.TO[e]({with:n,result:this.TO}),this.FROM[e]({with:n,result:this.FROM})}}class rt{constructor(t){this.config=et,this.context=t.context,this.vertexShader=this.createShader({type:this.context.VERTEX_SHADER,source:et.VERTEX_SOURCE}),this.fragmentShader=this.createShader({type:this.context.FRAGMENT_SHADER,source:et.FRAGMENT_SOURCE}),this.program=this.createProgram()}createShader({type:t,source:e}){const n=this.context.createShader(t);return this.context.shaderSource(n,e),this.context.compileShader(n),this.context.getShaderParameter(n,this.context.COMPILE_STATUS)?n:(console.error(`Error with compile: ${this.context.getShaderInfoLog(n)}`),this.context.deleteShader(n),null)}createProgram(){const t=this.context.createProgram();return this.context.attachShader(t,this.vertexShader),this.context.attachShader(t,this.fragmentShader),this.context.linkProgram(t),this.context.getProgramParameter(t,this.context.LINK_STATUS)?t:(console.error(`Error with link: ${this.context.getProgramInfoLog(t)}`),this.context.deleteProgram(t),null)}}class it{constructor(t){this.context=t.context,this.program=t.program,this.uniforms=this.createUniforms()}createUniforms(){const t={},e=this.context.getProgramParameter(this.program,this.context.ACTIVE_UNIFORMS);for(let n=0;n<e;n++){const e=this.context.getActiveUniform(this.program,n),r=this.context.getUniformLocation(this.program,e.name);t[e.name]=this.createUniform({type:e.type,location:r})}return t}createUniform({type:t,location:e}){return t===this.context.FLOAT_MAT2?function(t){this.context.uniformMatrix2fv(e,!1,t.data)}.bind(this):t===this.context.FLOAT_MAT3?function(t){this.context.uniformMatrix3fv(e,!1,t.data)}.bind(this):t===this.context.FLOAT_MAT4?function(t){this.context.uniformMatrix4fv(e,!1,t.data)}.bind(this):void 0}}class st{constructor(t){this.program=t.program,this.context=t.context,this.attributes=this.createAttributes()}createAttributes(){const t={},e=this.context.getProgramParameter(this.program,this.context.ACTIVE_ATTRIBUTES);for(var n=0;n<e;n++){const e=this.context.getActiveAttrib(this.program,n),r=this.context.getAttribLocation(this.program,e.name);t[e.name]=this.createAttribute({location:r})}return t}createAttribute({location:t}){return function(e){this.context.bindBuffer(this.context.ARRAY_BUFFER,e.buffer),this.context.enableVertexAttribArray(t),this.context.vertexAttribPointer(t,e.size,e.type,e.normalize,e.stride,e.offset)}.bind(this)}}window.bb=Q,window.myio=class{static async imread(t){const e=document.createElement("canvas"),n=e.getContext("2d"),r=await fetch(t),i=await r.blob(),s=await createImageBitmap(i),o=[0,0,s.width,s.height];e.width=s.width,e.height=s.height,n.drawImage(s,...o),e.remove();let a=n.getImageData(...o).data;const u=new Uint8ClampedArray(s.width*s.height*3);for(let t=0,e=0;t<a.length;t+=4,e+=3)u[e]=a[t],u[e+1]=a[t+1],u[e+2]=a[t+2];return a=null,{shape:[s.width,s.height,3],pixels:u,binary:s}}},window.app=class{constructor(){this.config=et,this.objects=[],this.pan=this.pan.bind(this),this.zoom=this.zoom.bind(this),this.plot=this.plot.bind(this),this.start=this.start.bind(this),this.render=this.render.bind(this),this.start()}start(){return this.hud=document.createElement("canvas"),this.hud.style.zIndex=this.config.HUD_Z_INDEX,this.hud.style.position=this.config.HUD_POSITION_STYLE,this.canvas=document.createElement("canvas"),this.canvas.style.zIndex=this.config.CANVAS_Z_INDEX,this.canvas.style.position=this.config.CANVAS_POSITION_STYLE,this.resize(),this.canvas.context=this.canvas.getContext(this.config.CONTEXT_WEB_GL),this.cameraManager=new nt({}),this.bufferManager=new tt({context:this.canvas.context}),this.programManager=new rt({context:this.canvas.context}),this.uniformManager=new it({context:this.canvas.context,program:this.programManager.program}),this.attributeManager=new st({context:this.canvas.context,program:this.programManager.program}),this.canvas.context.useProgram(this.programManager.program),this.hud.context=this.hud.getContext(this.config.CONTEXT_2D),this.hud.context.font=this.config.HUD_FONT,this.hud.context.fillStyle=this.config.HUD_COLOR,document.body.prepend(this.hud),document.body.prepend(this.canvas),this}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.hud.width=.5*window.innerWidth,this.hud.height=.2*window.innerHeight,this.config.ASPECT_RATIO=this.canvas.width/this.canvas.height}plot({vertices:t,colors:e,sizes:n,mode:r}){this.objects.push({sizeBuffer:this.bufferManager.createBuffer({array:n}),colorBuffer:this.bufferManager.createBuffer({array:e}),vertexBuffer:this.bufferManager.createBuffer({array:t}),drawMode:this.canvas.context[r],drawCount:t.shape[0]}),this.render()}render(){this.canvas.context.clear(this.canvas.context.COLOR_BUFFER_BIT);for(const t of this.objects)this.attributeManager.attributes.a_Color(t.colorBuffer),this.attributeManager.attributes.a_PointSize(t.sizeBuffer),this.attributeManager.attributes.a_Position(t.vertexBuffer),this.uniformManager.uniforms.u_ViewMatrix(this.cameraManager.lookAt()),this.uniformManager.uniforms.u_ProjMatrix(this.cameraManager.project()),this.canvas.context.drawArrays(t.drawMode,0,t.drawCount)}pan(t){this.cameraManager.pan(t),this.render()}zoom(t){this.cameraManager.zoom(t),this.hud.context.clearRect(0,0,this.hud.width,this.hud.height),this.hud.context.fillText(`loc | r: ${Math.round(this.config.FROM_VECTOR.data[0])} g: ${Math.round(this.config.FROM_VECTOR.data[1])}, b: ${Math.round(this.config.FROM_VECTOR.data[2])}`,10,70),this.render()}};e.default=async function(){window.vertices=Q.randint({low:0,high:256,shape:[1e6,3],type:Float32Array}),window.colors=vertices.divide({with:255}),window.sizes=Q.ones({shape:[1e6,1]}).multiply({with:10}),app.graphics.plot({vertices:vertices.multiply({with:.1}),colors:colors,sizes:sizes})}()}]);
//# sourceMappingURL=main.js.map